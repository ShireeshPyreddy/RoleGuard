<!DOCTYPE html>
<html lang="en">
<head>
    <title>Add New User</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css') }}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='fonts/font-awesome-4.7.0/css/font-awesome.min.css') }}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='fonts/iconic/css/material-design-iconic-font.min.css') }}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='vendors/animate/animate.css') }}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='vendors/css-hamburgers/hamburgers.min.css') }}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='vendors/animsition/css/animsition.min.css') }}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='vendors/select2/select2.min.css') }}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='vendors/daterangepicker/daterangepicker.css') }}">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/util_1.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/main_1.css') }}	">
    <!--===============================================================================================-->
</head>


<!--<script>-->
<!--document.addEventListener('DOMContentLoaded', function() {-->
<!--    var addButton = document.getElementById('addButton');-->

<!--    addButton.addEventListener('click', function(event) {-->
<!--        event.preventDefault();  // Prevent any form submission-->

<!--        var form = document.getElementById('userForm');-->
<!--        var formData = new FormData(form);-->

<!--        fetch('/add_user', {-->
<!--            method: 'POST',-->
<!--            body: formData-->
<!--        })-->
<!--        .then(response => response.json())-->
<!--        .then(data => {-->
<!--        	alert(data.Status);-->
<!--        	window.location.href = document.referrer;-->
<!--&lt;!&ndash;            var messageArea = document.getElementById('messageArea');&ndash;&gt;-->
<!--&lt;!&ndash;            messageArea.textContent = data.Status; // Assuming your response object has a "Status" key&ndash;&gt;-->

<!--        })-->
<!--        .catch(error => {-->
<!--            console.error('Error:', error);-->
<!--        });-->
<!--    });-->


<!--});-->


<!--</script>-->

<body>

<div class="limiter">
    <div class="container-login100">
        <div class="wrap-login100">
			<span class="login100-form-title p-b-26">
                Update SE Emp Details
            </span>

            <form class="login100-form validate-form" method="post" id="userForm">


            <div class="wrap-input100">
                <input class="input100" type="text" name="username" value="{{ username }}">
<!--                <span class="focus-input100" data-placeholder="Username"></span>-->
            </div>
                <div class="wrap-input100" style="display: none;">
                <input class="input100" type="text" name="table" value="{{ role }}">
<!--                <span class="focus-input100" data-placeholder="Username"></span>-->
            </div>
            <div id="seFields">

<!--						<div class="wrap-input100">-->
<!--							<input class="input100" type="text" name="nameOne" placeholder="Name">-->
<!--						</div>-->

<!--						<div class="wrap-input100">-->
<!--							<input class="input100" type="text" name="projectname" placeholder="Project Name">-->
<!--						</div>-->
<!--						<div class="wrap-input100">-->
<!--							<input class="input100" type="text" name="supervisorOne" placeholder="Supervisor">-->
<!--						</div>-->
<!--						<div class="wrap-input100">-->
<!--							<input class="input100" type="text" name="deadline" placeholder="MM/DD/YYYY">-->
<!--						</div>-->
						<div class="wrap-input100">
							<input class="input100" type="text" name="addressOne" placeholder="Address" value="{{address}}">
						</div>
						<div class="wrap-input100">
							<input class="input100" type="text" name="phone_no_one" placeholder="Phone Number" value="{{phone_num}}">
						</div>
						<div class="wrap-input100">
							<input class="input100" type="text" name="salary" placeholder="Salary" value="{{salary}}">
						</div>
						<div class="wrap-input100">
<!--							<input class="input100" type="text" name="blood_group" placeholder="Blood Group" value="{{bg}}">-->
                            <select id="bloodgroup" name="blood_group"  required>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                            </select>


						</div>
					</div>

                <div class="container-login100-form-btn">
                    <div class="wrap-login100-form-btn">
                        <div class="login100-form-bgbtn"></div>
                        <button class="login100-form-btn" type="submit" id="addButton">
                            Update
                        </button>
                    </div>
                </div>
            </form>


            <!--				<span class="focus-input100" data-placeholder="Select User"></span>-->

            <!--				<form class="login100-form validate-form" action="/update_user" method="post" id="userForm">-->

            <!--&lt;!&ndash;					<span class="login100-form-title p-b-48">&ndash;&gt;-->
            <!--&lt;!&ndash;						<i class="zmdi zmdi-font"></i>&ndash;&gt;-->
            <!--&lt;!&ndash;					</span>&ndash;&gt;-->

            <!--					<div class="wrap-input100">-->
            <!--						<input class="input100" type="text" name="username">-->
            <!--						<span class="focus-input100" data-placeholder="Username"></span>-->
            <!--					</div>-->

            <!--					<div class="wrap-input100">-->
            <!--						<input class="input100" type="text" name="name">-->
            <!--						<span class="focus-input100" data-placeholder="Name"></span>-->
            <!--					</div>-->

            <!--					<div class="wrap-input100 validate-input" data-validate="Enter password">-->
            <!--						<span class="btn-show-pass">-->
            <!--							<i class="zmdi zmdi-eye"></i>-->
            <!--						</span>-->
            <!--						<input class="input100" type="password" name="pass">-->
            <!--						<span class="focus-input100" data-placeholder="Password"></span>-->
            <!--					</div>-->

            <!--					<div class="wrap-input100">-->
            <!--						<span class="focus-input100"></span>-->
            <!--						<select class="input100" name="role" id="roleSelect">-->
            <!--							<option value="">Select Role</option> &lt;!&ndash; Placeholder option &ndash;&gt;-->
            <!--							<option value="admin">Admin</option>-->
            <!--							<option value="hr">HR</option>-->
            <!--							<option value="se">SE</option>-->
            <!--							<option value="pr">PR</option>-->
            <!--							<option value="general">General</option>-->
            <!--							&lt;!&ndash; Add other roles as needed &ndash;&gt;-->
            <!--						</select>-->
            <!--					</div>-->
            <!--					<div class="container-login100-form-btn">-->
            <!--						<div class="wrap-login100-form-btn">-->
            <!--							<div class="login100-form-bgbtn"></div>-->
            <!--							<button class="login100-form-btn" type="submit" id="addButton">-->
            <!--								Update-->
            <!--							</button>-->
            <!--						</div>-->
            <!--					</div>-->

            <!--					<div id="messageArea"></div>-->

            <!--&lt;!&ndash;					<div class="text-center p-t-115">&ndash;&gt;-->
            <!--&lt;!&ndash;						<span class="txt1">&ndash;&gt;-->
            <!--&lt;!&ndash;							Donâ€™t have an account?&ndash;&gt;-->
            <!--&lt;!&ndash;						</span>&ndash;&gt;-->

            <!--&lt;!&ndash;						<a class="txt2" href="#">&ndash;&gt;-->
            <!--&lt;!&ndash;							Sign Up&ndash;&gt;-->
            <!--&lt;!&ndash;						</a>&ndash;&gt;-->
            <!--&lt;!&ndash;					</div>&ndash;&gt;-->
            <!--				</form>-->
        </div>
    </div>
</div>


<div id="dropDownSelect1"></div>

<!--===============================================================================================-->
<script src="{{ url_for('static', filename='vendors/jquery/jquery-3.2.1.min.js') }}"></script>
<!--===============================================================================================-->
<script src="{{ url_for('static', filename='vendors/animsition/js/animsition.min.js') }}"></script>
<!--===============================================================================================-->
<script src="{{ url_for('static', filename='vendors/bootstrap/js/popper.js') }}"></script>
<script src="{{ url_for('static', filename='vendors/bootstrap/js/bootstrap.min.js') }}"></script>
<!--===============================================================================================-->
<script src="{{ url_for('static', filename='vendors/select2/select2.min.js') }}"></script>
<!--===============================================================================================-->
<script src="{{ url_for('static', filename='vendors/daterangepicker/moment.min.js') }}"></script>
<script src="{{ url_for('static', filename='vendors/daterangepicker/daterangepicker.js') }}"></script>
<!--===============================================================================================-->
<script src="{{ url_for('static', filename='vendors/countdowntime/countdowntime.js') }}"></script>
<!--===============================================================================================-->
<script src="{{ url_for('static', filename='js/main_1.js') }}"></script>


<script>
document.addEventListener('DOMContentLoaded', function() {
    // Function to update the role select based on the selected user
    function updateRoleSelect() {
        var userSelect = document.getElementById('userSelect');
        var roleSelect = document.getElementById('roleSelect');
        var selectedUser = userSelect.value;

        // Clear existing options in roleSelect except for the placeholder
        while (roleSelect.options.length > 1) {
            roleSelect.remove(1);
        }

        // Display the role select if a user is selected, otherwise hide it
        if (selectedUser !== "") {
            document.getElementById('otherFields').style.display = 'block';

            // Fetch roles for the selected user (this example uses a static function for demonstration)
            var roles = getRolesForUser(selectedUser);

            // Populate the role select with options based on the selected user's roles
            roles.forEach(function(role) {
                var option = new Option(role, role);
                roleSelect.options.add(option);
            });
        } else {
            document.getElementById('otherFields').style.display = 'none';
        }
    }

    // Example function to get roles for a user
    function getRolesForUser(user) {
        // Example mapping of users to roles
        var userRoles = {
            'user1': ['Admin', 'HR'],
            'user2': ['SE', 'PR'],
            // Add more mappings as needed
        };

        return userRoles[user] || []; // Return roles for the user or an empty array if no roles are found
    }

    // Attach the change event listener to the user select element
    var userSelect = document.getElementById('userSelect');
    if (userSelect) {
        userSelect.addEventListener('change', updateRoleSelect);
    }
});

</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var addButton = document.getElementById('addButton');

    addButton.addEventListener('click', function(event) {
        event.preventDefault();  // Prevent any form submission

        var form = document.getElementById('userForm');
        var formData = new FormData(form);

        fetch('/update_se_details', {
            method: 'POST',
            body: formData
        })

        .then(response => response.json())
        .then(data => {
        	alert(data.Status);
        	window.location.href = document.referrer;
<!--            var messageArea = document.getElementById('messageArea');-->
<!--            messageArea.textContent = data.Status; // Assuming your response object has a "Status" key-->

        })
        .catch(error => {
            console.error('Error:', error);
        });
    });


});
</script>

</body>
</html>